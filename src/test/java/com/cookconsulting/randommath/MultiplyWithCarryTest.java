package com.cookconsulting.randommath;

import org.junit.Test;

import static org.junit.Assert.assertTrue;

/**
 * Test application for the RandomNumberFactory random number generator.
 * This verifies that the random numbers have the expected
 * distribution using a standard statistical test.
 * Unfortunately the test is more complicated than the generator itself.
 * <p/>
 * For more information on testing random number generators, see
 * chapter 10 of Beautiful Testing by Tim Riley and Adam Goucher.
 *
 * @author Todd Cook
 * @author John D. Cook
 * @since 8/21/11 10:32 PM
 */
public class MultiplyWithCarryTest extends RandomNumberFactoryTest {

    @Test
    public void testMWCknownData() {

        RandomNumberFactory rnf =
            new RandomNumberFactory(RandomNumberAlgorithm.MULTIPLY_WITH_CARRY);

        rnf.setSeed(56L, 362436069L);

        StringBuilder buf = new StringBuilder();
        for (int ii = 0; ii < 1000; ii++) {
            buf.append(rnf.getLong());
        }
        String knownGoodData = "54672627224595968151487486633540754473231312" +
            "326447569100516633562633963845412455707562322950014641437260769" +
            "852255071675263478248445167596796288815210714642651677363749861" +
            "827414784011228782351040897971273417581942236429762628951612194" +
            "245897561383562133037450177463211135870367553178130537489207003" +
            "312743286987527617409217257558167197543850610579730503846114732" +
            "793972963754878005213489944811746335172284151038250569663575893" +
            "633939017776553743667915148627397511638902222359506555590991229" +
            "190880666218013959331626937488423291020234738731195899401183793" +
            "084689909346603218364582158605118185619722540307523351821751335" +
            "174196794545723632487059605711039475633487567980201732332695976" +
            "547421114231511795222804367124575279172265312161159212449332881" +
            "215024112514684594163447887059404596021635487753612410219233640" +
            "420618664121779320134112923872321583273268938267275014360599248" +
            "440416063199835322151943594105123067589413778891842821557725200410055144865667958840863311803720481415501146365850099325875642652474484516151800071897663262653750941337107294168662391010775850863596331604131264499181557925624965324104207606525272935356925954368632314947075254443588140862431087312885715421734372840405428930627646502403515204516507731444934221130183317314185713394287139935327592357233077331781234472246603520248289847521371164221293904813596434476248341652519729167024378624481082232159250743243921146700842905576488320754942197095873297946952038614325142684079984932096547276797591338220425065146077819183055831610385613638308220295212757045475394831955004054920177901074019375353867022610961413513098415109218166658228556163262196116319291046017732099206743095954818427887205219072514352372505572205730172208238431528835437258418966223450812102837157972158634297180625485512683771932069416248419584020036473502122928772154100415615726042113648885716139099726286970141622281866641218545156311525977777566851133922401643408279767247632249240833628802690238151817124379492944280434140114012115637463656042557939921251313548513050536141149969409924151201307430709398100128993008018543695770029860803444002147366898005012953467460309572054203136577742086164883906029898107074320210351297768324483255132815641532195981104949517052803446029231241034891272664591266200181400610352720731226924781229880582317028077712996255402505679978478322180653567592325416445428150849483709903121532099757390006791719194972112598499966139877008627291595713197892030600436351324144465430118676172562056420112569525138944209162349413563221771540342579189554037634367413258905713153574962932696812162214076632848685163700644556411147875634579681762370223143385611028545463186940498220501214858212403181823916707697491071728448115972631332953677781425443833224407819220697603691492975882656191192349627867126144586352098600513354806055935513133822390049649374539404030684672063736875613329358992924161015412265112371101658855532619936613547580690427463648522319070172859862888287051379308359809813127366637525519226745911731258012896425666344522241816411904154125964659317372020786182038662914004592181299762740622851053516374389906437515120813233799976224233228239230921180172719391466223103636239053206451980971974315548940720725478663264546490314639110541997008916970575671384514614122664343822630603602168197394593651980109453424298246959432804436561144340475177247295237192680241114893402196395387322662833846370383456226597352663983755770876094181512040344485171090554608172400721227881092892291892547127944371113989839843410850958251818617129974846593319494424418323170230544137181644324454467317513448626768312104497012867057112935726715172304399041198795521231486902354672821817436903314843328313066641941207173937721795764132771532678339040226913104669212485712031615462569345084154445860420642634672651572358831134272029019581652831675239686125095273439849918581796747598986040047709595706297931693112813575932319467482493753342339665049941235067974063209074282633069513317114634141194542321544390915585420114248728398354946175693468017113561625004189336083735821427244255627218603527203672465588167350363124183647353321308430927787681913998502251503309116293335011852556885101557214774863421718888752691330629762693015231995979366198358182830233559357552060603397493380159554112330410643216442924239684715610276659901268602494235521571025270505729283502903883141645139393219714075505463668244496182177211910901896502496026672393595788212406974323286273631208677214318537041382981156463100528547911315786453580654447801935677277677280420850271086556878442717339847243726140517034202232615856110261120601742115292982178326736329694306910294597713443260843286353745842502761721811101637264439816042589901616245471672721425912404279503490559183204161169920772914782681002904322787391213491778089843876961899560096323478161132979058741939188073191684053311555735273824201720281378698032704490442616007500125287378636549974073298644830282322433232853940851481062090141671747623907108602344950628402705614131907905501835205347101332662335254078671014567445141783975875253079174677032829019756912864557115184574282326320707357189945230494685763760766081660385829711667886746921426839783750125493320512054738264006163443063462808308221875757090415208692125600467482404480773393665516639552601804993860127234854642504944823095236211876143512690033329511339774241162867413705755036676183502657306932534296081372602815400293108237677489103565793362204856364151562502115516250323823595441287084081548698658927478348911157619581168959630539673775861492709693418507459037964409948693828112207824109322887969653501025017384824231339924986349444601039139394918839470303696957638202315426476800366204936309556166529119272848118388991154270252010418958935093873392040827418183437154411322971760328720932301787947809141116596535670268527160369485825920332052205709246373777737533024123851907534480780320307802349029573758582093244336423187545929856576562684683837366613443912147384063881243177226125454037219719012960531163919255010241118402540818267701976586815127402835853691199142079171391527412738337321964871174680628330451115045123623893504836421567688641978108822764239198301165908131419184911586638199112669400740979977407917371115673705354010141940100084108326309899311531121469288441234316171805113582555303358194723712371838986934631915214849143125447770125655658921128813081969856039151644336796950620834238649061553855905269784130227395088221419687556195128794627073723531600372425349986112910044101663001455121371093123536959736461395097257319526108037188982491894573594347512890228164160193946256932110828189197090051013271368083964351069384388675214976634110204899989754286419203932291086369075272448293713383832027474013321601299397104183665826788941273047248984393449352789990255462263367436040358101483569501283022463911636029406288666035730661694945231811298496173182641409612846301932259502854110910828369337469910462453974111327866470714643453744820137477377933266799861729916560988738715323013447734184604783228014979304545454821719952411312250242163410888631863233176963177781373099068250675166149513225027816340672295701574207089349422830840052249292942324139602224941790932635541319201673802862259139411513537027931516891524487462783227144302141282284740134395802359722920098772567014929120053778284793844330745955794507624711234795713304039746619386814438113868886959615332967584642525765378187068486014747758761295333470191197338834958364757969670317080344203605184796270140757314049683464678233024000745985282529065924195796073628618071298224468335851468238088758533718749264362413101219457515981141562927559579613272580630367592615593510836220707727121603949614276804516087234345519475898611586095405546908347261364822638514457122953492613288798400642660619662703362593231993814614785938962790572010213713611829552285661101384334151468008732170457141824016793285677643229510592532812216454115544021132899264919564462451570988829295769884230979807601097141691061200485386622712408659817011103354517103437742524687283300022969626212728724143948332305382129259352903631404112971859973176212157207530463870502704562374253145455313879966521908579262292089394295571215723594359861336506110686730480310868676640409113273804776353353681546028440071482206209635174785134933087158634479502196596058733641822164075343383349427439640264732860989589742768052128227540350876263705337579119698692440475672494070296437232970011408825505720340475882281885956371100479927677888242957082624084525905372354095528828772013866991638578226881821669873913322679386832913467718971033568802973143795068171380736654288625646207768312225959071222454114213401242762828890379225073841394299746272229651807857406269469746834811230741942591052871101072761749193608519375338411990636296927591624139241967372699340056148440593005382789529035169268484721473370643126368018535451467891089646189727292117904815451410328307199752261929532149422696912885179969173376811327925968064934375383741293031132766213137259840040729359597191166877027709581415203693223479376352196522098313986662643609728575564293819477717132357893394224426393451011904317263550658168190082931273502691361752584378653776526760833172897577866429426655510465366188853183282962013911302291671980030066357623222575003188614656372048727722690698521732122755225985606631284550033316047190270944190961239689012544656783505659637401400388110183852328049878931713197426123388966429535145902366988270138825377835605872571290016984403216104236089058422773225098387517148210618183982648595252287347422124789230368906313141912959794198245959695587721921071550781888468632299607891222851182877649575528704709101299013232157223398213250389286459320802747568491218429782452760318415539033633453004830187283390542075608541722007387";
        assertTrue(knownGoodData.equals(buf.toString()));

    }

    @Test
    public void KSTestMultiplyWithCarry() {
        System.out.println("\n\nTesting MultiplyWithCarry for Kolmogorov-Smirnov test for distributions:");
        kSTest(getMultiplyWithCarry());
    }

    @Test
    public void TestDistributionsMultiplyWithCarry() {
        System.out.println("Testing MultiplyWithCarry for Distributions:");
        TestDistributions(getMultiplyWithCarry());
    }

    private RandomNumberFactory getMultiplyWithCarry() {
        RandomNumberFactory rnf =
            new RandomNumberFactory(RandomNumberAlgorithm.MULTIPLY_WITH_CARRY);
        rnf.setSeedFromSystemTime();
        return rnf;
    }

}
